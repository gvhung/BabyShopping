@model IEnumerable<BabyShop.Models.ProductCartModel>
@{
    ViewBag.Title = "ShoppingCart";
    Layout = "~/Views/Shared/_Inner.cshtml";
}
<script type="text/javascript">
    $(document).ready(function () {
        $("#txtQuantity").keyup(function () {
            sessionStorage.quantity = $(this).val();

        });
    });
</script>
<div class="divTable" style="width: 95%">
    <div class="divHeaderRow" style="width: 100%; border-bottom: 2px solid black;">
        <span style="font-size: 25px; color: #000000; font-weight: bold;">Shopping Cart</span>
    </div>
    <div class="divRow">
        <div class="lstView">
            <table style="width: 100%">
                <tr>
                    <th>
                        Action
                    </th>
                    <th>
                        Item
                    </th>
                    <th>
                        Description
                    </th>
                    <th>
                        Qty
                    </th>
                    <th>
                        Unit Price
                    </th>
                    <th>
                        Price
                    </th>
                </tr>
                @foreach (var product in Model)
                {   
                    <tr style='background-color: #F3F2F0'>
                        <td align="center">
                            <div id="editButton" class="show">
                                <a href="@Url.Action("DeleteItemInShoppingCart", new { productCartId = product.Id })">
                                    <img src="../../Content/Images/removeImg.jpg" alt="Delete" /></a> &nbsp;&nbsp;
                                <img src="../../Content/Images/edit.png" alt="Edit" id="EditQuantity" onclick="javascript:return editQuantityHandler();" /></div>
                            <div id="updateCancelButton" class="hide">
                                <img src="../../Content/Images/check.gif" alt="Update" id="UpdateQuantity" onclick="javascript:return updateQuantityHandler(@product.Id);" />
                                <img src="../../Content/Images/cross.png" alt="Cancel" id="CancelQuantity" onclick="javascript:return cancelQuantityHandler();" />
                            </div>
                        </td>
                        <td style='width: 10%; vertical-align: middle'>
                            <img src="../Content/Images/@product.ImageURL" alt="@product.CategoryName"  width='80px' height='60px' />
                        </td>
                        <td>
                            <strong>@product.CategoryName</strong>
                        </td>
                        <td>
                            <div id="divQuantity" class="show">
                                <strong>@product.Quantity</strong>
                            </div>
                            <input type="text" id="txtQuantity" name="Quantity" value="@product.Quantity" class="hide" style="width:50px;"  />
                        </td>
                        <td>
                            <strong>$@product.UnitPrice</strong>
                        </td>
                        <td>
                            <strong>$@product.Price</strong>
                        </td>
                    </tr>
                }
                <tr style='background-color: #CFD0CB'>
                    <td>
                    </td>
                    <td>
                    </td>
                    <td>
                    </td>
                    <td>
                    </td>
                    <td>
                        SubTotal
                    </td>
                    <td>
                        $@Model.Select(x => x.Price).Sum()
                    </td>
                </tr>
                <tr>
                    <td>
                    </td>
                    <td>
                    </td>
                    <td>
                    </td>
                    <td>
                    </td>
                    <td>
                        Shipping
                    </td>
                    <td>
                        &nbsp; $@Model.Select(x => x.Price > 0 ? 10 : 0).FirstOrDefault()
                    </td>
                </tr>
                <tr style='background-color: #646464; height: 50px; color: #ffffff'>
                    <td>
                    </td>
                    <td>
                    </td>
                    <td>
                    </td>
                    <td>
                    </td>
                    <td>
                        Total
                    </td>
                    <td>
                        @Html.Raw(string.Format("${0}", @Model.Select(x => x.Price).Sum() + @Model.Select(x => x.Price > 0 ? 10 : 0).FirstOrDefault()))
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div class="divRow">
        <div class="cntShopng fl">
            <a href="../Product/Product" title="Continue Shopping">Continue Shopping</a></div>
        <div class="fr">
            <a href="../Home/Login" title="Check out">
                <img src="@Url.Content("~/Content/Bottom/checkout.png")" alt="Check Out" /></a></div>
        <div class="cl">
        </div>
    </div>
</div>
